---
/*
  Renders a list of menu items recursively.
  Uses the menuItem override object for main menu items.
*/
const { 
  items = [], 
  class: extraClass = '', 
  menuItem,         // object: { component, class }
  submenuItem,      // object: { component, class }
  isHierarchical = true, 
  breakpoint
} = Astro.props;
import DefaultMenuItem from './MenuItem.astro';

// Capture the current path for active comparison.
const currentPath = Astro.url.pathname;

const RenderComponent = menuItem && menuItem.component ? menuItem.component : DefaultMenuItem;
---
<ul class={`list-none m-0 p-0 ${extraClass}`}>
  {items.map((item) => (
    <RenderComponent 
      item={item} 
      depth={0} 
      menuItem={menuItem}
      submenuItem={submenuItem}
      isHierarchical={isHierarchical}
      breakpoint={breakpoint}
      active={currentPath === item.slug}
    />
  ))}
</ul>
