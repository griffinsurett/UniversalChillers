---
import Form      from "@/components/Form/Form.astro";
import TextInput from "@/components/Form/Inputs/TextInput.astro";
import Textarea  from "@/components/Form/Inputs/Textarea.astro";
import { SiteData } from "@/content/SiteData";
import { getCurrentEntryId } from "@/utils/CurrentEntry";

const {
  name = "Contact Form",
  inputClasses   = "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder:text-gray-500 outline-none",
  wrapperClasses = "mb-[var(--spacing-sm)]",
  inputLabelClass = "block text-base font-medium text-left text-gray-700 mb-2",
  formClass      = "",
  formLabel    = "Contact Us",
  labelClass = "text-2xl text-center capitalize mb-4",
  submitClass = "",
  submitButtonVariant = "",
} = Astro.props;

const formAction = import.meta.env.PUBLIC_INTEGRATION_FORMSPREE + import.meta.env.PUBLIC_QUOTE_FORM;

// Extract current page identifier
const currentPage = getCurrentEntryId(Astro);
---

<Form
  name={name}
  formLabel={formLabel}
  labelClass={labelClass}
  class="text-center"
  formClass={`${formClass}`}
  enableSuccessBanner={true}
  action={formAction}
  successBannerMessage="Thank you for your message. We will get in touch with you shortly."
  successBannerClass="p-[var(--spacing-sm)] bg-primary text-bg border border-[var(--color-border)] bg-light-opacity"
  submitClass={submitClass}
  submitButtonVariant={submitButtonVariant}
>
  <!-- Hidden input for current page -->
    <input type="hidden" name="Page-of-Submission" value={currentPage} />

    <!-- Row 1: First & Last Name -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <TextInput
        name="firstName"
        label="First Name"
        placeholder="Your first name"
        required
        inputClass={inputClasses}
        wrapperClass=""
        labelClass={inputLabelClass}
      />
      <TextInput
        name="lastName"
        label="Last Name"
        placeholder="Your last name"
        required
        inputClass={inputClasses}
        wrapperClass=""
        labelClass={inputLabelClass}
      />
    </div>

    <!-- Row 2: Email & Phone -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <TextInput
        name="email"
        type="email"
        label="Email Address"
        placeholder="your.email@example.com"
        required
        inputClass={inputClasses}
        wrapperClass=""
        labelClass={inputLabelClass}
      />
      <TextInput
        name="phone"
        type="tel"
        label="Phone Number"
        placeholder="(732) 555-0123"
        inputClass={inputClasses}
        wrapperClass=""
        labelClass={inputLabelClass}
      />
    </div>

    <!-- Row 3: Message -->
    <div class="mb-6">
      <Textarea
        name="message"
        label="Message"
        placeholder="Tell us more about your needsâ€¦"
        required
        rows={4}
        inputClass="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder:text-gray-500 outline-none resize-vertical"
        wrapperClass=""
        labelClass={inputLabelClass}
      />
    </div>

    <!-- Hidden honeypot field for spam protection -->
    <input type="hidden" name="_gotcha" style="display: none;" />

</Form>